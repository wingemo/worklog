<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Worklog</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="style.css" />
</head>

<body>
<header class="bg-white border-bottom shadow-sm mb-3">
  <div class="container-lg logo-container">
    <svg
      class="logo-svg"
      viewBox="0 0 40 40"
      xmlns="http://www.w3.org/2000/svg"
      width="36"
      height="36"
      style="flex-shrink:0;"
    >
      <rect width="40" height="40" rx="8" fill="#2563eb" filter="url(#shadow)" />
      <text
        x="50%"
        y="55%"
        text-anchor="middle"
        dominant-baseline="middle"
        fill="white"
        font-family="Poppins, sans-serif"
        font-weight="600"
        font-size="24"
      >
        W
      </text>
      <defs>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
          <feDropShadow
            dx="0"
            dy="2"
            stdDeviation="2"
            flood-color="#000000"
            flood-opacity="0.2"
          />
        </filter>
      </defs>
    </svg>
    <div class="logo-text">
      <h5>Worklog</h5>
      <small>Fast field logging and support</small>
    </div>
  </div>

  <div class="container-lg">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <button class="nav-link active" id="tab-chat" onclick="showChat()">üìù Ny logg</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="tab-history" onclick="showHistory()">üìú Historik</button>
      </li>
    </ul>
  </div>
</header>

<main class="container-lg py-3">
  <section id="chat-view">
    <div class="chat-log" id="chatLog">
      <!-- Exempellogg: utf√∂rt arbete -->
      <div class="chat-bubble">
        Utf√∂rde installation av ny 3G1.5-kabel till k√∂kets eluttag. Kabelkanal monterad och jordning testad.
        <span class="timestamp">08:42</span>
      </div>

      <!-- AI svar -->
      <div class="chat-bubble ai">
        Loggen √§r nu bearbetad och finns under historik.
        <span class="timestamp">08:42</span>
      </div>

      <!-- Exempel: anv√§ndare fr√•gar om ICA N√§ra historik -->
      <div class="chat-bubble">
        Visa historik f√∂r kund ICA N√§ra
        <span class="timestamp">08:45</span>
      </div>

      <!-- AI svar med historik -->
      <div class="chat-bubble ai" style="max-width: 70%">
        <strong>Historik ICA N√§ra:</strong>
        <div class="history-row">
          <strong>Per Svensson</strong> <span class="history-badge">Installation</span><br />
          Installerade utebelysning och s√§kerhetsbelysning i entr√©.<br />
          <span class="history-products">Produkter: LED-belysning, kabel 2G1.5, kabelkanal</span> <span class="history-time">2024-10-15 08:30</span>
        </div>
        <div class="history-row">
          <strong>Anna Karlsson</strong> <span class="history-badge">Service / Byte</span><br />
          Byte av elcentral, nya automats√§kringar monterade.<br />
          <span class="history-products">Produkter: Automats√§kringar, elcentral</span> <span class="history-time">2024-11-02 09:15</span>
        </div>
        <span class="timestamp">08:45</span>
      </div>
    </div>
  </section>

  <section id="history-view" class="d-none">
    <div class="mb-3">
      <label class="form-label">V√§lj kund</label>
      <select class="form-select" id="customerSelect" onchange="loadCustomerLogs()">
        <option selected>V√§lj kund...</option>
        <option>ICA N√§ra</option>
        <option>Privat ‚Äì Johansson</option>
        <option>F√∂retag AB</option>
      </select>
    </div>
    <div id="historyLogs"></div>
  </section>
</main>

<div id="chatInput" class="chat-input fixed-bottom bg-white border-top shadow-sm">
  <div class="container-lg">
    <div class="input-group py-2">
      <label class="btn btn-outline-secondary" title="Bifoga bild">
        üì∑<input type="file" accept="image/*" capture hidden />
      </label>
      <input
        id="logInput"
        type="text"
        class="form-control"
        placeholder="Skriv logg eller fr√•ga om kund..."
      />
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
